<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>{{.AppTitle}}: {{.PageTitle}}</title>
  <link rel="shortcut icon" href="/assets/favicon.png">
  <link rel="stylesheet" href="/assets/fonts.css">
  <link rel="stylesheet" href="/assets/theme-{{.UserConfig.SystemTheme}}.css">
</head>
<body>

<div id="headmenu">
  <div class="boxinmenu">
  <div id="evenly">
    <div class="mobileMenuButton" id="mobileMenuButtonMenu" onclick="showMobileMenu();"><img class="vector" src="/assets/menu.svg" alt="Меню"></div>
    <div class="textmenu" id="textmenu">
    <a href="/docs/">Документы</a>
    <a href="/tasks/?anyparticipants=my">Задачи</a>
    <a href="/team/">Сотрудники</a>
    </div>
    <div class="graphicmenu">
      <a href="/config" title="Настройки"><img class="vector" src="/assets/settings.svg" alt="Настройки"></a>
      <a href="/team/profile/{{.LoggedinID}}" title="Профиль"><img class="vector" src="/assets/profile.svg" alt="Профиль"></a>
      <a href="/logout" title="Выйти"><img class="vector" src="/assets/quit.svg" alt="Выйти"></a>
    </div>
  </div>
  </div>
</div>
<div id="mobilemenu" style="display: none;"></div>

<div id="container">
  

  <div class="control" id="control">
    <h1>{{.PageTitle}}</h1>

    <p id="appliedFilters"></p>

    <div id="controlButtons">
      <span class="panel"><a href="/team/">Перейти к списку сотрудников</a></span>
      {{if .LoggedinAdmin}}<a href="/companies/company/new" class ="sbut greenish">+ Новая организация</a>{{end}}
    </div>
    
    {{if eq .Message "notAllorSomeElemsAllowedtoRemove"}}<p class="msgred">Действие отклонено: нет полномочий для всех или некоторых объектов. Удалять вправе только администратор.</p>{{end}}
    {{if eq .Message "removedElems"}}<p class="msgok">Удалено объектов: {{.RemovedNum}}.</p>{{end}}
    {{if eq .Message "removalError"}}<p class="msgred">Ошибка удаления объектов.</p>{{end}}

    <br>

  </div>

  <div class="main" id="main">
    {{if not .Companies}}<div class="center"><br><br>Объекты отсутствуют.<br><br></div>{{else}}

      {{range .Companies}}
        {{$bi := .GiveHeadID}}
        <div class="panel"><a href="/companies/company/{{.ID}}">{{if and (not .ShortName) (not .FullName) (not .ForeignName)}}ID: {{.ID}}{{end}}
          {{if .ShortName}}{{.ShortName}}{{end}}{{if .FullName}}, ({{.FullName}}){{end}}{{if .ForeignName}}, ({{.ForeignName}}){{end}}</a>;
        {{if .RegNo}}ОГРН: {{.RegNo}};{{end}}
        {{if .TaxNo}}ИНН: {{.TaxNo}};{{end}}
        {{if .Contacts.AddressReg}}Адрес регистрации: {{.Contacts.AddressReg}};{{end}}
        {{if $bi}}Руководитель: <a href="/team/profile/{{$bi}}">{{.GiveHeadNameJob}}</a>;{{end}}
        См. также: <a href="/team/?companies={{.ID}}">Список сотрудников организации</a>.</div><br>
      {{end}}

    <div id="stat"><br>Всего объектов: {{.FilteredNum}}</div>
    {{end}}

  </div>

  <div id="bottom">© 2022 <a href="https://github.com/alecxcode/edm" target="_blank">EDM Project</a></div>

  
</div>

<script src="/assets/functions.js"></script>

</body>
</html>
